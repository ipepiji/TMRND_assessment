<h1 id="title" class="display-5 title text-warning">Login</h1>
<br>

<form (ngSubmit)="login()" [formGroup]="form" aria-labelledby="title">

  <div class="form-control-group">
    <input nbInput fullWidth [formControl]="form.controls['username']" placeholder="Username" fieldSize="large"
      [status]="form.controls['username'].dirty ? (form.controls['username'].invalid  ? 'danger' : 'success') : 'basic'"
      [attr.aria-invalid]="form.controls['username'].invalid && form.controls['username'].touched ? true : null"
      minlength="4" maxlength="50" autofocus autocomplete="on" required>
    <ng-container *ngIf="form.controls['username'].invalid && form.controls['username'].touched">
      <p class="caption status-danger" *ngIf="form.controls['username'].hasError('required')">
        Username is required!
      </p>
      <p class="caption status-danger"
        *ngIf="form.controls['username'].hasError('minlength') || form.controls['username'].hasError('maxlength')">
        Any character, min: 4, max: 50
      </p>
    </ng-container>
  </div>

  <div class="form-control-group">
    <input nbInput fullWidth type="password" [formControl]="form.controls['password']" placeholder="Password"
      fieldSize="large"
      [status]="form.controls['password'].dirty ? (form.controls['password'].invalid  ? 'danger' : 'success') : 'basic'"
      [attr.aria-invalid]="form.controls['password'].invalid && form.controls['password'].touched ? true : null"
      pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).{3,30}$" autocomplete="on" required>
    <ng-container *ngIf="form.controls['password'].invalid && form.controls['password'].touched">
      <p class="caption status-danger" *ngIf="form.controls['password'].hasError('required')">
        Password is required!
      </p>
      <p class="caption status-danger" *ngIf="form.controls['password'].hasError('pattern')">
        Password must contains lowercase, uppercase, and symbol<br>
        Number is optional, min 3, max 30
      </p>
    </ng-container>
  </div>

  <button nbButton fullWidth status="success" size="large" [nbSpinner]="loading" nbSpinnerStatus="info"
    [disabled]="submitted || form.invalid || form.pristine" [class.btn-pulse]="submitted">
    Log In
  </button>
  
</form>
<hr>
<button nbButton fullWidth status="info" size="large" routerLink="../register">
  Create an account
</button>